<!--
	此示例下载自 https://echarts.apache.org/examples/zh/editor.html?c=tree-basic
-->
<!DOCTYPE html>
<html lang="en" style="height: 100%">

<head>
  <meta charset="utf-8">
</head>

<body style="height: 100%; margin: 0">
  <div id="container" style="height: 100%"></div>

  <script type="text/javascript"
    src="https://echarts.apache.org/zh/js/vendors/jquery@3.7.1/dist/jquery.min.js"></script>
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>

  <!-- Uncomment this line if you want to dataTool extension
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5/dist/extension/dataTool.min.js"></script>
  -->
  <!-- Uncomment this line if you want to use gl extension
  <script type="text/javascript" src="https://echarts.apache.org/zh/js/vendors/echarts-gl/dist/echarts-gl.min.js"></script>
  -->
  <!-- Uncomment this line if you want to echarts-stat extension
  <script type="text/javascript" src="https://echarts.apache.org/zh/js/vendors/echarts-stat/dist/ecStat.min.js"></script>
  -->
  <!-- Uncomment this line if you want to echarts-graph-modularity extension
  <script type="text/javascript" src="https://echarts.apache.org/zh/js/vendors/echarts-graph-modularity/dist/echarts-graph-modularity.min.js"></script>
  -->
  <!-- Uncomment this line if you want to use map
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@4.9.0/map/js/world.js"></script>
  -->
  <!-- Uncomment these two lines if you want to use bmap extension
  <script type="text/javascript" src="https://api.map.baidu.com/api?v=3.0&ak=YOUR_API_KEY"></script>
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5/dist/extension/bmap.min.js"></script>
  -->

  <script type="text/javascript">
    var dom = document.getElementById('container');
    var myChart = echarts.init(dom, null, {
      renderer: 'canvas',
      useDirtyRect: false
    });
    var app = {};
    var ROOT_PATH = 'https://echarts.apache.org/examples';
    var option;

    myChart.showLoading();
    setTimeout(() => {
      data = {
        "lineStyle": {
          "color": "#1dc9b7"
        },
        "itemStyle": {
          "color": "red"
        },
        "index": 1,
        "name": "192.168.2.88; P2P",
        "title": "192.168.2.88; P2P",
        "label": {
          "position": "left",
          "verticalAlign": "middle",
          "align": "right"
        },
        "symbol": "image://http://localhost:4200/assets/img/flags/private.png",
        "symbolSize": 30,
        "children": [
          {
            "lineStyle": {
              "color": "#1dc9b7"
            },
            "itemStyle": {
              "color": "red"
            },
            "index": 2,
            "name": "SMBv23; ",
            "title": "SMBv23; ",
            "symbol": "image://http://localhost:4200/assets/img/flags/public.png",
            "isRelated": true,
            "symbolSize": 1,
            "children": [
              {
                "lineStyle": {
                  "color": "#1dc9b7"
                },
                "itemStyle": {
                  "color": "red"
                },
                "index": 3,
                "name": "219.136.146.177",
                "title": "219.136.146.177",
                "symbol": "image://http://localhost:4200/assets/img/flags/public.png",
                "symbolSize": 30,
                "label": {
                  "offset": [
                    0,
                    -10
                  ]
                },
                "children": []
              }
            ]
          }
        ]
      }

      myChart.hideLoading();
      data.children.forEach(function (datum, index) {
        index % 2 === 0 && (datum.collapsed = true);
      });
      myChart.setOption(
        (option = {
          tooltip: {
            trigger: 'item',
            triggerOn: 'mousemove'
          },
          toolbox: {
            show: true,
            orient: 'vertical',
            // left: 'left',
            itemSize: 20,  // 增加整体大小
            feature: {
              myZoomIn: {
                show: true,
                // title: 'Zoom In',
                icon: 'path://M2,2 L34,2 L34,34 L2,34 Z M9,18 L27,18 M18,9 L18,27',  // 增加路径大小
                onclick: (e, chart) => {
                  let currentZoom = myChart.getOption().series[0].zoom || 1;
                  currentZoom += 0.2; // Increment zoom level
                  myChart.setOption({
                    series: [
                      {
                        zoom: currentZoom
                      }
                    ]
                  });

                }
              },
              myZoomOut: {
                show: true,
                // title: 'Zoom Out',
                icon: 'path://M2,2 L34,2 L34,34 L2,34 Z M9,18 L27,18',  // 增加路径大小
                onclick: (e, chart) => {
                  let currentZoom = myChart.getOption().series[0].zoom || 1;
                  currentZoom -= 0.2; // Decrement zoom level
                  // if (currentZoom < 1) {
                  //   currentZoom = 1; // Prevent zooming out too much
                  // }
                  myChart.setOption({
                    series: [
                      {
                        zoom: currentZoom
                      }
                    ]
                  });

                }
              },
            }
          },
          series: [
            {
              type: 'tree',
              data: [data],
              top: '1%',
              left: '7%',
              bottom: '1%',
              zoom: 1,
              right: '20%',
              symbolSize: 7,
              label: {
                position: 'left',
                verticalAlign: 'middle',
                align: 'right',
                fontSize: 9
              },
              leaves: {
                label: {
                  position: 'right',
                  verticalAlign: 'middle',
                  align: 'left'
                }
              },
              emphasis: {
                focus: 'descendant'
              },
              expandAndCollapse: true,
              animationDuration: 550,
              animationDurationUpdate: 750
            }
          ]
        })
      );

    }, 200)

    if (option && typeof option === 'object') {
      myChart.setOption(option);
    }

    window.addEventListener('resize', myChart.resize);
  </script>
</body>

</html>